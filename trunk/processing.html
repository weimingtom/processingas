<html>
  <head>
    <title>Processing.as</title>
    <script type="text/javascript">

var ProcessingAS = {
	object: null,

	init: function () {
		ProcessingAS.object = document.getElementById('processing');
	},

	resize: function (w, h) {
		ProcessingAS.object.width = w;
		ProcessingAS.object.height = h;
	},
	
	loadScript: function (code, images) {
		ProcessingAS.object.loadScript(code, images);
	}
};

function run(code) {
	// sketchy loadImage pre-processing
	var regex = /loadImage\(("[^"]+"|'[^']+')\)/g;
	for (var matches, images = []; (matches = regex.exec(code)) != null; )
		images.push(matches[1].substring(1, matches[1].length - 1));

	ProcessingAS.loadScript(code, images);
}

    </script>
  </head>

  <body style="background: #eee">
    <p>
      <object data="processing.swf" type="application/x-shockwave-flash" width="0" height="0" id="processing">
        <param name="allowScriptAccess" value="always">
      </object>
    </p>
    
    <textarea rows="30" cols="150" id="code"></textarea><br>
    <input type="submit" value="Submit" onclick="run(document.getElementById('code').value); return false">
  </body>
</html>